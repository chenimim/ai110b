# 模擬退火演算法
## 介紹

&emsp;&emsp;一種通用機率演算法，常用來在一定時間內尋找在一個很大搜尋空間中的近似最佳解。

&emsp;&emsp;退火是將材料加熱後再經特定速率冷卻，目的是增大晶粒的體積，並且減少晶格中的缺陷。材料中的原子原來會停留在使內能有局部最小值的位置，加熱使能量變大，原子會離開原來位置，而隨機在其他位置中移動。退火冷卻時速度較慢，使得原子有較多可能可以找到內能比原先更低的位置。

> 停止準則

疊代過程的一般停止準則：溫度T降低至某閾值時，或連續若干次疊代均未接受新解時，停止疊代，接受當前尋找的最佳解為最終解。

> 退火方案

在某個溫度狀態T下，當一定數量的疊代操作完成後，降低溫度T，在新的溫度狀態下執行下一個批次的疊代操作。
## code實作
```
import math
import random

def P(e, enew, T): 
    if (enew < e):
        return 1
    else:
        return math.exp((e-enew)/T)

def annealing(s, maxGens) : 
    sbest = s                             
    ebest = s.energy()                     
    T = 100                               
    for gens in range(maxGens):           
        snew = s.neighbor()               
        e    = s.energy()                  
        enew = snew.energy()              
        T  = T * 0.995                     
        if P(e, enew, T)>random.random():
            s = snew  
            print("{} T={:.5f} {}".format(gens, T, s.str())) 

        if enew < ebest:                 
            sbest = snew
            ebest = enew
    
    print("solution: {}", sbest.str())     
    return sbest                           
```
## 參考資料
背景知識及程式實作
